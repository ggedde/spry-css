/*!
* Spry Toggles
*/
@use "variables"as *;
@use "ui"as *;

:is(nav,.list) li>.icon:nth-child(2) {
	font-size: 80%;
	position: absolute;
	right: 0.5em;
	top: 0.25em;
}

:is(nav,.list) li:has(> .icon:nth-child(2)) > :first-child {
	padding-right: 2.5em;
}

.hoverable {
	> ul > li > [data-toggle=hover],
	> ul > li > [data-toggle=next],
	> li > [data-toggle=hover],
	> li > [data-toggle=next] {
		pointer-events: none
	}
}

.closed,
.hoverable > li ul,
.hoverable > ul > li ul,
[data-toggle=next] + *,
[data-toggle="hover"] + * {
	@extend %ui-closed;
}

.open,
.hoverable .open,
[class*=-hoverable] .open,
.hoverable>li:hover>ul,
.hoverable>ul>li:hover>ul,
.hoverable li:has(:focus-visible)>ul,
[data-toggle=hover].hoverable:hover + *{
	@extend %ui-open;
}

@each $breakpoint,
$breakpoint_width in $breakpoints {
	@media screen and (min-width: $breakpoint_width) {

		.#{$breakpoint}-closed,
		.#{$breakpoint}-hoverable > ul > li ul,
		.#{$breakpoint}-hoverable > li ul {
			@include ui-closed;
		}

		.#{$breakpoint}-open,
		.#{$breakpoint}-hoverable>ul>li:hover>ul,
		.#{$breakpoint}-hoverable>li:hover>ul,
		.#{$breakpoint}-hoverable li:has(:focus-visible)>ul {
			@include ui-open;
		}

		.#{$breakpoint}-hoverable {
			> ul > li > [data-toggle=hover],
			> ul > li > [data-toggle=next],
			> li > [data-toggle=hover],
			> li > [data-toggle=next] {
				pointer-events: none
			}
		}
	}
}