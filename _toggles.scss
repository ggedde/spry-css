/*!
* Spry Toggles
*/
@use "extends";
@use "mixins";
@use "variables";

:is(nav, .list) li>.icon:nth-child(2) {
	font-size: 80%;
	position : absolute;
	right    : 0.5em;
	top      : 0.25em;
}

:is(nav, .list) li.has-icon > :not(.icon):first-child {
	padding-right: 2.5em;
}

:is(nav, .list) li:has(> .icon:nth-child(2))> :not(.icon):first-child {
	padding-right: 2.5em;
}

.hoverable {

	>ul>li> :is([data-toggle=hover], [data-toggle=next]),
	>li> :is([data-toggle=hover], [data-toggle=next]) {
		pointer-events: none
	}
}

.closed,
.hoverable>li ul,
.hoverable>ul>li ul,
[data-toggle=next]+*,
[data-toggle=hover]+* {
	@extend %ui-closed;
}

:not([data-toggle=hover]:hover)+.closed:not(.open,:hover) {
	padding-block: 0;
	margin-block : 0;
	min-height   : 0;
	overflow     : hidden;
}

.open,
.hoverable .open,
[class*=-hoverable] .open,
.hoverable>li:hover>ul,
.hoverable>ul>li:hover>ul,
[data-toggle=hover]:hover+*,
[data-toggle=hover]+:not(.dismissed):hover {
	@extend %ui-open;
}

.hoverable li:has(:focus-visible)>ul{
	@include mixins.ui-open;
}

@each $breakpoint,
$breakpoint_width in variables.$breakpoints {
	@media screen and (min-width: $breakpoint_width) {

		.#{$breakpoint}-closed,
		.#{$breakpoint}-hoverable>ul>li ul,
		.#{$breakpoint}-hoverable>li ul {
			@include mixins.ui-closed;
		}

		.#{$breakpoint}-open,
		.#{$breakpoint}-hoverable>ul>li:hover>ul,
		.#{$breakpoint}-hoverable>li:hover>ul {
			@include mixins.ui-open;
		}

		.#{$breakpoint}-hoverable li:has(:focus-visible)>ul {
			@include mixins.ui-open;
		}

		.#{$breakpoint}-hoverable {

			>ul>li> :is([data-toggle=hover], [data-toggle=next]),
			>li> :is([data-toggle=hover], [data-toggle=next]) {
				pointer-events: none
			}
		}
	}
}