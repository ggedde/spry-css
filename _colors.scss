/*!
* Spry Colors
*/

@use "variables"as *;

// Set Defaults
.contrast {
	--color: var(--contrast);
	--color-rgb: var(--contrast-rgb);
}

.faint {
	--color: var(--faint);
	--color-rgb: var(--faint-rgb);
}

.border-contrast {
	border-color: var(--contrast);
}

.border-faint {
	border-color: var(--faint);
}

.color-contrast {
	--text-color     : var(--contrast);
	--text-color-rgb : var(--contrast-rgb);
	color: var(--text-color);
}

.color-faint {
	--text-color     : var(--faint);
	--text-color-rgb : var(--faint-rgb);
	color: var(--text-color);
}

.bg-contrast {
	background-color: var(--contrast);
}

.bg-faint {
	background-color: var(--faint);
}

button,
.badge,
[type=submit],
.button,
.alert {
	@if (lightness(map-get($colors, 'default')) > 70) {
		--text-color: var(--dark);
	}

	@else {
		--text-color: var(--light);
	}
}

.badge.faint,
button.faint,
[type=submit].faint,
form.faint [type=submit],
.button.faint,
.alert.faint {
	--text-color: var(--dark);

	&:is(.hazy, .outline, .link) {
		--text-color: var(--light);
	}
}

// Loop Colors.
@each $color_name,
$color_value in $colors {

	.link-#{$color_name} a,
	.link-hover-#{$color_name} a:not(.button):hover,
	.link-hover-#{$color_name} a:not(.button):focus {
		--text-color     : var(--#{$color_name});
		--text-color-rgb : var(--#{$color_name}-rgb);
		color            : var(--text-color);
	}

	.badge.#{$color_name},
	button.#{$color_name},
	button.icon.#{$color_name}:not(.hazy,.outline,.link),
	[type=submit].#{$color_name},
	.button.#{$color_name},
	.alert.#{$color_name} {
		@if (lightness($color_value) > 70) {
			--text-color: var(--dark);
		}

		@else {
			--text-color: var(--light);
		}
	}

	.border-#{$color_name} {
		border-color: var(--#{$color_name});
	}
}

// Update Prefered Theme Dark Colors
@media (prefers-color-scheme: dark) {
	select option {
		background: var(--dark);
		color     : var(--light);
	}
}

// Update Dark Theme Colors
[data-theme=dark] {

	background-color: darken(map-get($colors, 'dark'), 8%);
	color           : var(--contrast);

	--contrast    : #{map-get($colors, 'light')};
	--contrast-rgb: var(--light-rgb);
	--faint       : #{map-get($colors, 'dark')};
	--faint-rgb   : var(--dark-rgb);

	button.contrast,
	.badge.contrast,
	[type=submit].contrast,
	form.contrast [type=submit],
	.button.contrast,
	.alert.contrast {
		--text-color: var(--dark);

		&:is(.hazy, .outline, .link) {
			--text-color: var(--light);
		}
	}

	button.faint,
	.badge.faint,
	[type=submit].faint,
	form.faint [type=submit],
	.button.faint,
	.alert.faint {
		--text-color: var(--light);

		&:is(.hazy, .outline, .link) {
			--text-color: var(--dark);
		}
	}

	article {
		background-color: darken(map-get($colors, 'dark'), 6%);
	}

	select option,
	[role=tooltip] {
		background-color: var(--dark);
		color           : var(--light);
	}
}

[data-theme=light] {

	background-color: white;
	color           : var(--contrast);

	--contrast      : var(--dark);
	--contrast-rgb  : var(--dark-rgb);
	--faint         : var(--light);
	--faint-rgb     : var(--light-rgb);
	--text-color    : var(--dark);
	--text-color-rgb: var(--dark-rgb);

	button.contrast,
	.badge.contrast,
	[type=submit].contrast,
	form.contrast [type=submit],
	.button.contrast,
	.alert.contrast {
		--text-color: var(--light);

		&:is(.hazy, .outline, .link) {
			--text-color: var(--dark);
		}
	}

	button.faint,
	.badge.faint,
	[type=submit].faint,
	form.faint [type=submit],
	.button.faint,
	.alert.faint {
		--text-color: var(--dark);

		&:is(.hazy, .outline, .link) {
			--text-color: var(--light);
		}
	}

	article {
		background-color: white;
	}

	select option,
	[role=tooltip] {
		background-color: var(--light);
		color           : var(--dark);
	}
}


@each $color_name,
$color_value in $colors {

	[class].#{$color_name}:not(article) {
		--color     : var(--#{$color_name});
		--color-rgb : var(--#{$color_name}-rgb);
	}

	article.#{$color_name} {
		--card-color: var(--#{$color_name});
	}

	.icon.#{$color_name},
	.color-#{$color_name},
	[class*=color-#{$color_name}],
	a.color-#{$color_name},
	.hover-#{$color_name}:hover,
	.hover-#{$color_name}:focus,
	a.hover-#{$color_name}:hover,
	a.hover-#{$color_name}:focus,
	a.button.hover-#{$color_name}:hover,
	a.button.hover-#{$color_name}:focus,
	button.hover-#{$color_name}:hover,
	button.hover-#{$color_name}:focus {
		--text-color     : var(--#{$color_name});
		--text-color-rgb : var(--#{$color_name}-rgb);
		color            : var(--text-color);
	}

	.bg-#{$color_name},
	[role=tooltip].bg-#{$color_name} {
		background-color: var(--#{$color_name});
	}
}