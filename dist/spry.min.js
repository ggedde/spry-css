/**!
 * Spry Toggle JS
 *
 * Version: 1.0.0
 * Author: gedde.dev
 * Github: https://github.com/ggedde/spry-css
 */
class Spry{static elements=[];static toggle=function(e,t){var l=null,o=null,i=t&&["open","close","toggle"].includes(t)?t:"toggle",n=null,r=null,s=null;if(e&&e.type&&("keyup"===e.type||"keydown"===e.type)){if("keydown"===e.type&&[13,32].includes(e.keyCode)&&e.preventDefault(),"keyup"===e.type&&40===e.keyCode||"keydown"===e.type&&40!==e.keyCode||![40,13,32].includes(e.keyCode))return;40===e.keyCode&&(s=!0)}if("string"==typeof e?l=document.querySelector(e):e&&e.el&&e.togglers?l=e.el:e&&e.target?this.elements.forEach((t=>{t.togglers&&t.togglers.forEach((o=>{r=!1,o.el===e.target&&(l=t.el,i=o.action?o.action:"toggle",o.el===t.el&&(r=!0))}))})):e&&e.tagName&&(l=e),s){if(l.classList.contains("open")){var a=l.querySelector("a, button, input, .button, label");a&&(e.preventDefault(),a.focus())}}else e&&e.type&&("keyup"===e.type||"keydown"===e.type)&&e.preventDefault(),this.elements.forEach((e=>{e.el===l&&(o=!0,n="toggle"===i?r?"true"!==e.el.getAttribute("aria-pressed"):!e.el.classList.contains("open"):"open"===i,r?e.el.setAttribute("aria-pressed",n):(e.el.classList.toggle("open",n),e.el.setAttribute("aria-expanded",n),e.togglers.forEach((e=>{e.el.setAttribute("aria-pressed",n)}))))})),!o&&l&&l.classList.toggle("open")};static closeToggle=function(e){var t=e;if(e&&e.type&&"keyup"===e.type){if(![13,32].includes(e.keyCode))return;e.preventDefault()}"string"==typeof e?t=document.querySelector(e):e&&e.el&&e.togglers?t=e:e&&e.target&&(t=e.target.getAttribute("data-toggle-close")||e.target.closest(".open")),t&&this.toggle(t,"close")};static timeoutToggle=function(e){this.elements.forEach((t=>{t.togglers.forEach((l=>{if(l.el===e.target){var o=parseInt(e.target.getAttribute("data-toggle-timeout"))||3e3;o&&o>0&&setTimeout((()=>{this.toggle(t,"close")}),o)}}))}))};static closeAllToggles=function(e){var t=e&&e.type&&"click"===e.type?e.target:null,l=e&&e.type&&"keyup"===e.type&&e.keyCode&&27===e.keyCode,o=null,i=null,n=null;(!e||t||l)&&this.elements.forEach((e=>{e.el.classList.contains("open")&&(!t||t&&e.el!==t&&!e.el.contains(t))&&(o=!1,i=!1,e.togglers.forEach((l=>{(l.el===t||l.el.contains(t))&&(o=!0),["",!0,"true"].includes(l.el.getAttribute("data-toggle-escapable"))&&(i=!0,console.log(l)),["",!0,"true"].includes(e.el.getAttribute("data-toggle-escapable"))&&(n=!0)})),o||!i&&!n||this.toggle(e))}))};static loadToggles=function(){document.querySelectorAll("[data-toggle]").forEach((e=>{var t=e.getAttribute("data-toggle"),l=[],o=e.getAttribute("data-toggle-action"),i=o&&["open","close","toggle"].includes(o)?o:"toggle";if(t)if("next"===t)l=[e.nextElementSibling];else{if("hover"===t)return;l=document.querySelectorAll(t)}else l=[e];l.length&&l.forEach((t=>{var l=!1,o=!1;this.elements.forEach((n=>{n.el===t&&(l=!0,o=!1,n.togglers.forEach((t=>{t.el===e&&(o=!0)})),o||n.togglers.push({el:e,action:i}))})),l||this.elements.push({el:t,togglers:[{el:e,action:i}]})}))})),document.addEventListener("click",this.closeAllTogglesBound),document.addEventListener("keyup",this.closeAllTogglesBound),document.querySelectorAll("[data-toggle-timeout]").forEach((e=>{e.removeEventListener("click",this.timeoutToggleBound),e.addEventListener("click",this.timeoutToggleBound)})),document.querySelectorAll("[data-toggle-close]").forEach((e=>{e.removeEventListener("click",this.closeToggleBound),e.addEventListener("click",this.closeToggleBound),e.removeEventListener("keyup",this.closeToggleBound),e.addEventListener("keyup",this.closeToggleBound)})),this.elements.forEach((e=>{e.togglers.forEach((e=>{e.el.removeEventListener("click",this.toggleBound),e.el.addEventListener("click",this.toggleBound),e.el.removeEventListener("keyup",this.toggleBound),e.el.addEventListener("keyup",this.toggleBound),e.el.removeEventListener("keydown",this.toggleBound),e.el.addEventListener("keydown",this.toggleBound)}))}))};static loadSliders=function(){document.querySelectorAll(".slider").forEach((e=>{if(!e.hasAttribute("data-loaded")){var t=parseInt(e.getAttribute("data-play")),l=e.hasAttribute("data-loop"),o=e.getAttribute("data-stop"),i=e.querySelector(".slider-slides"),n=i.childElementCount,r=e.querySelector(".slider-next"),s=e.querySelector(".slider-prev"),a=e.querySelector(".slider-pagination"),c=i.scrollWidth,d=i.innerHTML,u=null,g=null,h=!1;if(r||s||l||o||t){var goTo=(t,o)=>{var r=l?n:0;"next"===t?i.scrollBy(e.offsetWidth,0):"prev"===t?i.scrollBy(-i.offsetWidth,0):i.scrollTo({left:i.children[t+r].offsetLeft,behavior:o?"instant":"smooth"})},resetPlay=()=>{g&&(clearInterval(g),g=null),t&&(g=setInterval((()=>{var t="action"===o&&(e.querySelector("a:hover")||e.querySelector("button:hover")),l="hover"===o&&e.matches(":hover");t||l||goTo("next")}),t))};if(r&&r.addEventListener("click",(()=>{goTo("next")})),s&&s.addEventListener("click",(()=>{goTo("prev")})),a&&!a.childNodes.length&&i&&n)for(let e=0;e<n;e++){let t=document.createElement("button");0===e&&t.classList.add("active"),t.onclick=()=>{goTo(e),a.childNodes.forEach((e=>{e.classList.remove("active")})),t.classList.add("active")},a.append(t)}i.addEventListener("scroll",(()=>{e.setAttribute("data-sliding",""),e.removeAttribute("data-position"),u&&clearTimeout(u),g&&(clearInterval(g),g=null),u=setTimeout((function(){if(e.removeAttribute("data-sliding"),resetPlay(),l){var t=i.scrollWidth/3;if(i.scrollLeft<t){var o=t-i.scrollLeft;i.scrollTo({left:2*t-o,behavior:"instant"})}if(i.scrollLeft>=2*t){o=i.scrollLeft-2*t;i.scrollTo({left:t+o,behavior:"instant"})}}else i.scrollLeft?i.scrollLeft+e.offsetWidth>=i.scrollWidth-2&&e.setAttribute("data-position","end"):e.setAttribute("data-position","start");e.querySelectorAll(".slider-slides > *").forEach((t=>{t.removeAttribute("data-first"),t.removeAttribute("data-last");var l=Math.round(t.getBoundingClientRect().left-e.getBoundingClientRect().left);t.toggleAttribute("data-showing",l>=0&&l<e.clientWidth)}));var r=e.querySelectorAll("[data-showing]");if(r.length){if(a){a.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")}));var s=Array.from(i.children).indexOf(r[0]);l&&(s=s===2*n?0:s-n),void 0!==s&&a.children[s].classList.add("active")}r[0].setAttribute("data-first",""),r[r.length-1].setAttribute("data-last","");var preLoadImages=function(e,t,l){for(var o=0,i=[];e="next"===t?e.nextSibling:e.previousSibling;)o>=l||!e.nodeType||3===e.nodeType||("IMG"===e.tagName&&"lazy"===e.getAttribute("loading").toLowerCase()?i.push(e.src):e.querySelectorAll('img[loading="lazy"]').forEach((e=>{i.push(e.src)})),o++);i.forEach((e=>{(new Image).src=e}))};preLoadImages(e.querySelector("[data-last]"),"next",r.length),preLoadImages(e.querySelector("[data-last]"),"prev",r.length)}}),100)})),l?(i.innerHTML+=d+d,i.scrollTo({left:c,behavior:"instant"})):(i.dispatchEvent(new CustomEvent("scroll")),e.setAttribute("data-position","start")),resetPlay(),t&&("hover"===o&&(e.addEventListener("mouseout",(()=>{resetPlay()})),e.addEventListener("mouseover",(()=>{g&&(clearInterval(g),g=null)}))),"action"===o&&(document.addEventListener("selectionchange",(()=>{h&&document.getSelection().toString()&&g&&(clearInterval(g),g=null),h||document.getSelection().toString()||g||resetPlay()})),e.addEventListener("selectstart",(()=>{h=!0})),e.addEventListener("mouseup",(()=>{h=!1})))),e.setAttribute("data-loaded","")}}}))};static navigateList=function(e){var t=e.target.closest(".list.navigatable");if(t&&[37,38,39,40,13,32,27].includes(e.keyCode)){var l=t.querySelector("li:focus-within");if(l||(l=t.querySelector(":focus")),l)if(27===e.keyCode)e.target.blur();else if([13].includes(e.keyCode)&&["LABEL","INPUT"].includes(e.target.tagName))e.preventDefault(),e.target.click();else if([37,38,39,40].includes(e.keyCode)){e.preventDefault();var o="UL"===t.children[0].tagName?t.children[0].children:t.children,i=[...o].indexOf(l);if(i>-1){if((r=o[n=[39,40].includes(e.keyCode)?i+1:i-1])&&"LI"===r.tagName&&!r.querySelector("a, button, .button, input"))var n,r=o[n=[39,40].includes(e.keyCode)?n+1:n-1];if(r&&r.children&&r.children[0])if(r=r.children[0],!["A","BUTTON","LABEL","INPUT"].includes(r.tagName))[39,40].includes(e.keyCode)?n++:n--,(r=o[n])&&r.children&&r.children[0]&&(r=r.children[0]);r&&r.focus()}}}};static loadLists=function(){document.querySelectorAll(".list.navigatable").forEach((e=>{e.removeEventListener("keydown",this.navigateList),e.addEventListener("keydown",this.navigateList)}))};static closeToggleBound=this.closeToggle.bind(this);static timeoutToggleBound=this.timeoutToggle.bind(this);static closeAllTogglesBound=this.closeAllToggles.bind(this);static toggleBound=this.toggle.bind(this)}"complete"===document.readyState||"interactive"===document.readyState?(Spry.loadToggles(),Spry.loadSliders(),Spry.loadLists()):(document.addEventListener("DOMContentLoaded",Spry.loadToggles),document.addEventListener("DOMContentLoaded",Spry.loadSliders),document.addEventListener("DOMContentLoaded",Spry.loadLists));