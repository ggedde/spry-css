/*!
* Spry Grid
*/
@use "variables"as *;

.column,
.row,
.grid,
[class*=grid-] {
	--gapx        : #{map-get($gaps, 'default')};
	--gapy        : #{map-get($gaps, 'default')};
	--span        : 1;
	--cols        : 1;
	gap           : var(--gapy) var(--gapx);
}

.column {
	display       : flex;
	flex-direction: column;
}

.row {
	display       : flex;
	flex-wrap     : wrap;
	flex-direction: row;

	>* {
		flex  : 1;
		--span: 1;
	}
}

.grid,
[class*=grid-] {
	display       : grid;
	grid-auto-flow: column;
}

[class*="grid-"] {
	grid-template-columns: repeat(auto-fit, minmax(calc(var(--span) * 100px), 1fr));
	grid-auto-flow       : row;
}

.grid[class*="columns-"] {
	grid-template-columns: repeat(var(--cols), minmax(0, 1fr));
	grid-auto-flow       : row;
}

[class^="span-"],
[class*=" span-"],
[class*="columns-"]>* {
	flex: 0 0 calc(var(--span)/var(--cols)*100% - ((var(--cols)/var(--span) - 1)*(var(--gapx))/(var(--cols)/var(--span))));
}

[class*="span-"] {
	grid-column: span var(--span);
}

.span {
	grid-column: 1 / -1;
	flex       : 0 0 100%;
}

:is(.columns-auto>*,.span-auto) {
	flex : 0 auto;
	width: auto;
}

:is(.columns-fixed>*,.span-fixed) {
	flex: 1;
}

:is(.columns-fill>*,.span-fill) {
	flex: 1 auto;
}

@for $i from 1 through 12 {

	.span-#{$i},
	.grid-#{$i}00 {
		--span: #{$i};
	}

	.columns-#{$i} {
		--cols: #{$i};
	}
}

@each $breakpoint,
$breakpoint_width in $breakpoints {

	@media screen and (min-width: $breakpoint_width) {

		@for $i from 1 through 12 {

			.#{$breakpoint}-span-#{$i} {
				--span: #{$i};
			}

			.#{$breakpoint}-columns-#{$i} {
				--cols: #{$i};
			}
		}

		.#{$breakpoint}-column,
		.#{$breakpoint}-row,
		.#{$breakpoint}-grid {
			--gapx        : #{map-get($gaps, 'default')};
			--gapy        : #{map-get($gaps, 'default')};
			gap           : var(--gapy) var(--gapx);
		}

		.#{$breakpoint}-column {
			display       : flex;
			flex-direction: column;
		}

		.#{$breakpoint}-row {
			display       : flex;
			flex-wrap     : wrap;
			flex-direction: row;
		}

		.#{$breakpoint}-grid {
			display       : grid;
			grid-auto-flow: column;
		}

		:is(.#{$breakpoint}-columns-auto>*,.#{$breakpoint}-span-auto) {
			flex : 0 auto;
			width: auto;
		}
		
		:is(.#{$breakpoint}-columns-fixed>*,.#{$breakpoint}-span-fixed) {
			flex: 1;
		}
		
		:is(.#{$breakpoint}-columns-fill>*,.#{$breakpoint}-span-fill) {
			flex: 1 auto;
		}
	}
}